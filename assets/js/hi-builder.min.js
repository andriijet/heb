jQuery(document).ready(function(e){function t(t){var a=t.sortable("serialize");if(a.length>0){var i=t.sortable("serialize").get(0),n={type:"save-order",action:"hi_ajax_post_action",security:e("#security").val(),data:JSON.stringify(i)};e.post(ajaxurl,n,function(e){})}}function a(){var t=e.parseJSON(e("#hi-def-tpl").text());e("#hi-tpl-id").val(""),e("#hi-tpl-id-title").empty().text(e("#hi-tpl-id-title").data("text")),e(".hi-preview-sizes").find("option:selected").removeAttr("selected"),e(".hi-preview-sizes").trigger("change"),l._loadData(t)}function i(){var t=e("#hi-templates-tab .hi-content-excerpt");t.length&&t.each(function(){var t=e(this),a=t.data("hc");"undefined"!=typeof a&&0==a&&$clamp(t.get(0),{clamp:t.data("clamp")}),t.data("hc",1)})}function n(t,a){var i=t.data("showif").split("||"),n=[];return e.each(i,function(t,a){var i=a.split("="),o=e("."+i[0]);o.length>0&&("radio"==o[0].type&&(o.filter(":checked").val()==i[1]?n.push(1):n.push(0)),"checkbox"==o[0].type&&(o.filter('[id="'+i[0]+"-"+i[1]+'"]').is(":checked")?n.push(1):n.push(0)))}),a?1==Math.max.apply(Math,n)?t.slideDown(200):t.slideUp(200):1==Math.max.apply(Math,n)?t.show():t.hide(),i}function o(t){t.find("a.hi-tpl-name").editable({mode:"inline",emptyclass:"",init:function(){},success:function(t,a){var i=e("#hi-tpl-id").val(),n=e(this).data("id"),o=e.parseJSON(e("#data-"+n).text());o.tplname=a,e("#data-"+n).empty().text(JSON.stringify(o)),i==n&&(h.val(a),d.editable("setValue",a)),r(n,a);var s={type:"rename",action:"hi_ajax_post_action",security:e("#security").val(),id:n,name:a};e.post(ajaxurl,s,function(e){})}}).on("shown",function(t,a){e(this).siblings(".hi-tpl-id-name").hide()}).on("hidden",function(t,a){e(this).siblings(".hi-tpl-id-name").show()})}function r(t,a){e('select.hi-tpl-assign option[value="'+t+'"]').text(a+" ( id: "+t+" )")}function s(){var t={type:"get-assigns",action:"hi_ajax_post_action",security:e("#security").val()};e.post(ajaxurl,t,function(t){if("error"!=t){var a=JSON.parse(t);e.each(a,function(t,a){e("#hi-"+t+" .hi-tpl-assigned-info").replaceWith(a.html)})}})}function c(e){e.hasClass("pphoto")&&e.prettyPhoto({social_tools:!1})}var l={W:{layout:{preview:e("#hi-preview-block"),options:e("#hi-options-block"),controls:e("#hi-controls-block")},preview:e("#hi-preview"),image:e("#hi-preview-image"),overlay:e("#hi-preview-overlay"),buttons:e("#hi-preview-buttons"),content:e("#hi-preview-content"),buttons_div:e("#hi-buttons"),buttons_a:e("#hi-buttons").find("a"),content_div:e("#hi-content"),content_parts:{title:e("#hi-content-title"),excerpt:e("#hi-content-excerpt"),categories:e("#hi-content-categories"),shares:e("#hi-content-share")}},C:{mode_buttons:e(".hi-mode"),size_select:e(".hi-preview-sizes"),transition_speed:e(".hi-transition_speed"),wrapper_overflow:e(".hi-image-overflow"),wrapper_background:e("#hi-image-background"),tpl_name_control:e("#hi-tpl-name"),tpl_name:e("#hi-name"),tpl_assign:e(".hi-tpl-assign"),save_btn:e("#hi-save"),I:{push_enable:e(".hi-image-push"),radius:e(".hi-image-radius"),radius_units:e(".hi-image-radius-units"),slide_enable:e(".hi-image-slide"),slide_direction:e(".hi-image-slide-direction"),rotate_enable:e(".hi-image-rotate-enable"),rotate_grad_x:e(".hi-image-rotate-grad-x"),rotate_grad_y:e(".hi-image-rotate-grad-y"),rotate_grad_z:e(".hi-image-rotate-grad-z"),scale_enable:e(".hi-image-scale-enable"),scale_percents:e(".hi-image-scale-percents"),perspective:e(".hi-image-rotate-grad-p"),origin:e(".hi-image-origin")},O:{enable:e(".hi-overlay-enable"),background:e("#hi-overlay-background"),fade_enable:e(".hi-overlay-fade"),slide_enable:e(".hi-overlay-slide"),slide_direction:e(".hi-overlay-slide-direction"),rotate_enable:e(".hi-overlay-rotate-enable"),rotate_grad_x:e(".hi-overlay-rotate-grad-x"),rotate_grad_y:e(".hi-overlay-rotate-grad-y"),rotate_grad_z:e(".hi-overlay-rotate-grad-z"),rotate_direction:e(".hi-overlay-rotate-direction"),scale_enable:e(".hi-overlay-scale-enable"),scale_percents:e(".hi-overlay-scale-percents"),perspective:e(".hi-overlay-rotate-grad-p"),origin:e(".hi-overlay-origin")},B:{enable:e(".hi-buttons-enable"),pphoto:e(".hi-pretty-photo"),set:e(".hi-buttons-set"),link_single:e(".hi-buttons-link-single-enable"),type:e(".hi-buttons-type"),size:e(".hi-buttons-size"),color:e("#hi-buttons-foreground-color"),color_opacity:e("#hi-buttons-foreground-color-opacity"),background:e("#hi-buttons-background-color"),background_opacity:e("#hi-buttons-background-color-opacity"),radius:e(".hi-buttons-radius"),fade_enable:e(".hi-buttons-fade"),slide_enable:e(".hi-buttons-slide"),slide_direction:e(".hi-buttons-slide-direction"),rotate_enable:e(".hi-buttons-rotate-enable"),rotate_grad_x:e(".hi-buttons-rotate-grad-x"),rotate_grad_y:e(".hi-buttons-rotate-grad-y"),rotate_grad_z:e(".hi-buttons-rotate-grad-z"),rotate_direction:e(".hi-buttons-rotate-direction"),scale_enable:e(".hi-buttons-scale-enable"),scale_percents:e(".hi-buttons-scale-percents"),perspective:e(".hi-buttons-rotate-grad-p"),origin:e(".hi-buttons-origin")},C:{enable:e(".hi-content-enable"),enable_parts:e(".hi-content-parts"),always:e(".hi-content-always"),type:e(".hi-content-type"),background:e("#hi-content-background"),opacity:e("#hi-content-background-opacity"),margin:e(".hi-content-background-margin"),align:e(".hi-content-align"),title_type:e(".hi-content-title-type"),title_font_size:e(".hi-content-title-typo-font-size"),title_color:e("#hi-content-title-typo-color"),title_font_style:e(".hi-content-title-typo-font-style"),excerpt_length:e(".hi-content-excerpt-length"),excerpt_font_size:e(".hi-content-excerpt-typo-font-size"),excerpt_color:e("#hi-content-excerpt-typo-color"),excerpt_font_style:e(".hi-content-excerpt-typo-font-style"),categories_font_size:e(".hi-content-categories-typo-font-size"),categories_color:e("#hi-content-categories-typo-color"),categories_font_style:e(".hi-content-categories-typo-font-style"),shares_font_size:e(".hi-content-shares-typo-font-size"),shares_color:e("#hi-content-shares-typo-color"),shares_font_style:e(".hi-content-shares-typo-font-style"),shares_enable:e(".hi-content-shares-enable"),shares_radius:e(".hi-content-shares-radius"),fade_enable:e(".hi-content-fade"),partial_size:e(".hi-content-partial-size"),partial_position:e(".hi-content-partial-position"),slide_enable:e(".hi-content-slide"),slide_direction:e(".hi-content-slide-direction"),rotate_enable:e(".hi-content-rotate-enable"),rotate_grad_x:e(".hi-content-rotate-grad-x"),rotate_grad_y:e(".hi-content-rotate-grad-y"),rotate_grad_z:e(".hi-content-rotate-grad-z"),rotate_direction:e(".hi-content-rotate-direction"),scale_enable:e(".hi-content-scale-enable"),scale_percents:e(".hi-content-scale-percents"),perspective:e(".hi-content-rotate-grad-p"),origin:e(".hi-content-origin")}},S:{tplId:"",assigned:{},edit_mode:!1,transition_speed:"400",wrapper:{overflow:"hidden",background:"rgba(255, 255, 255, 0)"},image:{enable:!0,slide:0,scale:!1,push:!1,scale_percents:{start:"100",stop:"110"},rotate:!1,rotate_grad_x:{start:"0",stop:"0"},rotate_grad_y:{start:"0",stop:"0"},rotate_grad_z:{start:"0",stop:"0"},perspective:"400",origin:"center center",radius_units:"pc",radius:{start:"0",stop:"0"}},overlay:{enable:!0,background:"rgba(0, 0, 0, 0.6)",opacity:"1",fade:!0,slide:!1,slide_direction:"0",scale:!1,scale_percents:{start:"0",stop:"100"},rotate:!1,rotate_grad_x:{start:"0",stop:"0"},rotate_grad_y:{start:"0",stop:"0"},rotate_grad_z:{start:"0",stop:"0"},perspective:"400",origin:"center center"},buttons:{enable:!0,set:{link:!0,view:!0},link_single:!1,pphoto:!0,type:"background",background:"#ffffff",color:"#000000",radius:{start:"50",stop:"0"},size:28,opacity:"1",fade:!0,slide:!1,slide_direction:"0",scale:!1,scale_percents:{start:"0",stop:"100"},rotate:!1,rotate_grad_x:{start:"0",stop:"0"},rotate_grad_y:{start:"0",stop:"0"},rotate_grad_z:{start:"0",stop:"0"},perspective:"400",origin:"center center"},content:{enable:!1,enable_parts:{title:!0,excerpt:!0,categories:!0,shares:!0},always:!1,shares_enable:{twitter:!0,facebook:!0,googleplus:!0,pinterest:!0,tumblr:!1,linkedin:!1,reddit:!1,digg:!1},title_type:"link",typo:{title:{size:18,height:22,color:"#ffffff",bold:"bold",italic:!1,underline:!1,uppercase:!1},excerpt:{length:4,size:12,height:16,color:"#ffffff",bold:!1,italic:!1,underline:!1,uppercase:!1},categories:{size:12,height:16,color:"#ffffff",bold:!1,italic:!1,underline:0,uppercase:!1},shares:{size:14,color:"#ffffff",radius:0}},background:"rgba(0, 0, 0, 0.8)",opacity:"1",excerpt_length:4,align:"center",partial:"full",partial_size:"70",margin:0,fade:!0,slide:!1,slide_direction:"0",scale:!0,scale_percents:{start:"0",stop:"100"},rotate:!1,rotate_grad_x:{start:"0",stop:"0"},rotate_grad_y:{start:"0",stop:"0"},rotate_grad_z:{start:"0",stop:"0"},perspective:"400",origin:"center center",partial_position:"bottom"},tplid:""},Lorem:"Purto eius labitur vel id. Duo an justo aperiri integre, vidit dicat docendi sed ex, has prima simul tempor te. Dolorum detracto eu pro, enim ubique pericula te cum, ei dicam commune eos. An has legere option platonem. Animal atomorum te nam, ne vix movet tantas dissentiet, vel esse impedit delicata ad. Cu nec eripuit atomorum, veri pertinacia concludaturque cu mei. \nPer ut odio dolorum praesent, mea eu stet evertitur. Et hinc falli impedit mei, pri ex inani affert conclusionemque, quo reque legere reformidans ea. Cu usu brute convenire. Et mel mentitum definitiones necessitatibus. \nId persius laboramus mel, doming omnesque lucilius mel eu. Ne modo tamquam salutandi sit, duo erant verterem ne. In euripidis intellegebat sed. Ad purto diceret accumsan eos, inani timeam est id. Pro cetero recusabo at, sea imperdiet referrentur eu. \nEi mel habemus assentior. Mea paulo persius assentior ei, in pri quodsi indoctum, vel option ceteros qualisque ex. Ea alia deserunt inciderint quo, no laudem detraxit intellegat mea. Vel assum dolore legimus at, ne est nominati referrentur. \nVis solum perfecto imperdiet ne, ius homero platonem ad. Malis fierent insolens id ius. Per aeque dolore ubique id, has veniam splendide cu. Et per erat detracto omittantur. \nSolum vocent at eos, mea no quidam detracto. Eius tamquam an sea. Sumo aliquid debitis no vel, at essent copiosae has. Ea harum dolore mel, vis rationibus neglegentur consequuntur ne. Ex usu nisl invidunt. Eam esse saepe sententiae id, tation integre dolorem at vim. \nOmnis apeirian hendrerit in nec. Et elit recusabo corrumpit eam. Persecuti reformidans at nec, te mea vocent viderer. Ne vis autem simul. Te phaedrum molestiae sadipscing vix. Te quas alterum vel. \nSit vero brute adipisci an, eu mel minim iudico ridens, exerci oportere eu eam. Est modo choro adipiscing cu, hinc wisi eligendi usu ei. Timeam platonem an vel, mea errem nullam prodesset an, ex mel unum affert. Aliquip inermis sed ex, sed te amet signiferumque. No duo cetero impedit referrentur. Vix summo nostrud ad. An elit cibo tincidunt sit. \nRecteque laboramus usu te. Pri te quodsi torquatos, alienum pertinax explicari pri in. Vel aeque homero perfecto eu, sale legimus at eam, his ei idque aliquando deseruisse. Eum maiorum epicuri persequeris eu, ea vis docendi appellantur. \nEx enim iusto dicit qui, nam iuvaret delicatissimi ad, expetenda argumentum intellegebat vis at. Graeci regione propriae ut est, id assentior deterruisset sea, ea vis assum officiis. Ad mel postea epicuri, mazim propriae facilisis ius ut. Vis scriptorem delicatissimi eu. Erat corpora per at, an est ullum option honestatis.",_mode:function(){l.C.mode_buttons.on("change",function(t){"edit"==e(this).val()?l.S.edit_mode=!0:l.S.edit_mode=!1,l.W.preview.toggleClass("hi-edit",l.S.edit_mode),l._edit_mode(l.S.edit_mode)}).filter(":checked").trigger("change"),l.C.transition_speed.on("change",function(){l.S.transition_speed=e(this).val(),e.each({I:"image",O:"overlay",B:"buttons",C:"content"},function(e,t){l._css3(t)})}).trigger("change"),l.C.tpl_assign.on("change",function(t){var a={};l.C.tpl_assign.each(function(t,i){var n=e(i);if("INPUT"==i.nodeName&&n.is(":checked")&&(a[n.data("key")]=1),"TEXTAREA"==i.nodeName){var o=n.val().trim();""!=o&&(a[n.data("key")]=o)}}),l.S.assigned=a}).trigger("change")},_psize:function(){var t=localStorage.getItem("hi-preview-size");t||(t="420xauto"),l.C.size_select.val(t);var a=t.split("x");l.W.image.css({width:a[0],height:a[1]}),a[0]=parseInt(a[0])+2*parseInt(l.W.layout.preview.css("padding-left")),l.W.layout.preview.css({width:a[0]}),l.C.size_select.on("change",function(){var t=e(this).val(),a=t.split("x");localStorage.setItem("hi-preview-size",t),l.W.image.css({width:a[0],height:a[1]}),a[0]=parseInt(a[0])+2*parseInt(l.W.layout.preview.css("padding-left")),l.W.layout.preview.css({width:a[0]})})},_enable:function(){e.each({O:"overlay",B:"buttons",C:"content"},function(t,a){l.C[t].enable.on("change",function(){l.S[a].enable=l._is_on(e(this)),l.W[a].toggleClass("hi-disable",!l.S[a].enable),l._hover_action(0,a),l._css3(a),"C"==t&&l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length)}).filter(":checked").trigger("change")}),l.C.C.always.on("change",function(){l.S.content.always=l._is_on(e(this)),l._hover_action(l.S.content.always,"content"),l._css3("content")}).filter(":checked").trigger("change"),l.C.B.set.on("change",function(){var t=e(this),a=t.val();l.S.buttons.set[a]=t.is(":checked"),l.W.buttons_a.filter(".hi-ff-"+a).toggle(l.S.buttons.set[a])}).trigger("change"),l.C.B.link_single.on("change",function(){l.S.buttons.link_single=l._is_on(e(this))}).trigger("change"),l.C.B.pphoto.on("change",function(){l.S.buttons.pphoto=l._is_on(e(this)),l.S.buttons.pphoto?e(".hi-pb").prettyPhoto({social_tools:!1}):e(".hi-pb").off("click")}).filter(":checked").trigger("change")},_overflow:function(){l.C.wrapper_overflow.on("change",function(){l.S.wrapper.overflow=e(this).val(),l.W.preview.css("overflow",l.S.wrapper.overflow)}).filter(":checked").trigger("change")},_enable_parts:function(){l.C.C.enable_parts.on("change",function(){var t=e(this),a=t.val();l.S.content.enable_parts[a]=t.is(":checked"),l.W.content_parts[a].toggle(l.S.content.enable_parts[a]),"excerpt"==a&&l.S.content.enable_parts.excerpt&&(l.S.content.typo.excerpt.length=parseInt(l.C.C.excerpt_length.val()),l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length))}).trigger("change")},_buttons_type_init:function(){l.C.B.type.on("change",function(){l.S.buttons.type=e(this).val(),l.W.buttons.removeClass("hi-b-simple hi-b-background hi-b-border").addClass("hi-b-"+l.S.buttons.type),l.C.B.background.trigger("change"),l.C.B.size.trigger("change"),l._css3("buttons")}).filter(":checked").trigger("change")},_background:function(){l.C.O.background.on("change",function(){l.S.overlay.background=l.C.O.background.minicolors("rgbaString"),l.W.overlay.css({background:l.S.overlay.background})}).trigger("change"),l.C.wrapper_background.on("change",function(){l.S.wrapper.background=l.C.wrapper_background.minicolors("rgbaString"),l.W.preview.css({background:l.S.wrapper.background})}).trigger("change"),l.C.B.background.on("change",function(){"background"==l.S.buttons.type?l.S.buttons.background=l.C.B.background.minicolors("value"):l.S.buttons.background="transparent",l.W.buttons_a.css("background",l.S.buttons.background)}).trigger("change"),l.C.C.background.on("change",function(){l.S.content.background=l.C.C.background.minicolors("rgbaString"),l.W.content_div.css({background:l.S.content.background})}).trigger("change")},_color:function(){l.C.B.color.on("change",function(){l.S.buttons.color=l.C.B.color.minicolors("value"),l.W.buttons_a.css({color:l.S.buttons.color}),l._border()}).trigger("change")},_border:function(){"border"==l.S.buttons.type?l.W.buttons_a.css({border:"solid "+Math.ceil(.06*l.S.buttons.size)+"px "+l.S.buttons.color}):l.W.buttons_a.css({border:"solid 0px transparent"})},_margin:function(){l.C.C.margin.on("change",function(){l.S.content.margin=parseInt(l.C.C.margin.val()),l.W.content.css({padding:l.S.content.margin+"px"})}).trigger("change")},_align:function(){l.C.C.align.on("change",function(){l.S.content.align=e(this).val(),l.W.content_div.css("text-align",l.S.content.align)}).filter(":checked").trigger("change")},_size:function(){l.C.B.size.on("change",function(){var e=0,t="";l.S.buttons.size=parseInt(l.C.B.size.val()),e="simple"!=l.S.buttons.type?Math.ceil(1.618*l.S.buttons.size*1.618):l.S.buttons.size+2,t=e+"px",l.W.buttons_a.css({fontSize:l.S.buttons.size+"px",width:t,height:t,lineHeight:t}),l.W.buttons_div.css({height:e,marginTop:0-e/2+"px"}),l._border()}).trigger("change")},_clamp:function(e,t){var a=e.css("display");e.text(l.Lorem),$clamp(e.get(0),{clamp:t}),"none"==a&&e.css("display",a)},_check_clamp:function(){l.W.content_parts.excerpt.height()>l.W.content.height()&&l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length)},_typo:function(){l.C.C.title_type.on("change",function(){l.S.content.title_type=e(this).val()}).filter(":checked").trigger("change"),l.C.C.title_font_size.on("change",function(){l.S.content.typo.title.size=parseInt(l.C.C.title_font_size.val()),l.S.content.typo.title.height=l.S.content.typo.title.size+4,l.W.content_parts.title.css({fontSize:l.S.content.typo.title.size+"px",lineHeight:l.S.content.typo.title.height+"px"})}).trigger("change"),l.C.C.title_color.on("change",function(){l.S.content.typo.title.color=l.C.C.title_color.minicolors("value"),l.W.content_parts.title.css("color",l.S.content.typo.title.color)}).trigger("change"),l.C.C.title_font_style.on("change",function(){var t=e(this),a=t.val(),i=t.is(":checked"),n={};i?l.S.content.typo.title[a]=a:l.S.content.typo.title[a]=!1,e.each(l.S.content.typo.title,function(e,t){"bold"==e&&(l.S.content.typo.title.bold?n.fontWeight=l.S.content.typo.title.bold:n.fontWeight="normal"),"italic"==e&&(l.S.content.typo.title.italic?n.fontStyle=l.S.content.typo.title.italic:n.fontStyle="normal"),"underline"==e&&(l.S.content.typo.title.underline?n.textDecoration=l.S.content.typo.title.underline:n.textDecoration="none"),"uppercase"==e&&(l.S.content.typo.title.uppercase?n.textTransform=l.S.content.typo.title.uppercase:n.textTransform="none")}),l.W.content_parts.title.css(n)}).trigger("change"),l.C.C.excerpt_font_size.on("change.hi",function(){l.S.content.typo.excerpt.size=parseInt(l.C.C.excerpt_font_size.val()),l.S.content.typo.excerpt.height=l.S.content.typo.excerpt.size+4,l.W.content_parts.excerpt.css({fontSize:l.S.content.typo.excerpt.size+"px",lineHeight:l.S.content.typo.excerpt.height+"px"}),l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length)}).trigger("change"),l.C.C.excerpt_color.on("change",function(){l.S.content.typo.excerpt.color=l.C.C.excerpt_color.minicolors("value"),l.W.content_parts.excerpt.css("color",l.S.content.typo.excerpt.color)}).trigger("change"),l.C.C.excerpt_font_style.on("change",function(){var t=e(this),a=t.val(),i=t.is(":checked"),n={};i?l.S.content.typo.excerpt[a]=a:l.S.content.typo.excerpt[a]=!1,e.each(l.S.content.typo.excerpt,function(e,t){"bold"==e&&(l.S.content.typo.excerpt.bold?n.fontWeight=l.S.content.typo.excerpt.bold:n.fontWeight="normal"),"italic"==e&&(l.S.content.typo.excerpt.italic?n.fontStyle=l.S.content.typo.excerpt.italic:n.fontStyle="normal"),"underline"==e&&(l.S.content.typo.excerpt.underline?n.textDecoration=l.S.content.typo.excerpt.underline:n.textDecoration="none"),"uppercase"==e&&(l.S.content.typo.excerpt.uppercase?n.textTransform=l.S.content.typo.excerpt.uppercase:n.textTransform="none")}),l.W.content_parts.excerpt.css(n),l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length)}).trigger("change"),l.C.C.excerpt_length.on("change.hi",function(){l.S.content.typo.excerpt.length=parseInt(l.C.C.excerpt_length.val()),l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length)}).trigger("change"),l.C.C.categories_font_size.on("change",function(){l.S.content.typo.categories.size=parseInt(l.C.C.categories_font_size.val()),l.S.content.typo.categories.height=l.S.content.typo.categories.size+4,l.W.content_parts.categories.css({fontSize:l.S.content.typo.categories.size+"px",lineHeight:l.S.content.typo.categories.height+"px"})}).trigger("change"),l.C.C.categories_color.on("change",function(){l.S.content.typo.categories.color=l.C.C.categories_color.minicolors("value"),l.W.content_parts.categories.css("color",l.S.content.typo.categories.color)}).trigger("change"),l.C.C.categories_font_style.on("change",function(){var t=e(this),a=t.val(),i=t.is(":checked"),n={};i?l.S.content.typo.categories[a]=a:l.S.content.typo.categories[a]=!1,e.each(l.S.content.typo.categories,function(e,t){"bold"==e&&(l.S.content.typo.categories.bold?n.fontWeight=l.S.content.typo.categories.bold:n.fontWeight="normal"),"italic"==e&&(l.S.content.typo.categories.italic?n.fontStyle=l.S.content.typo.categories.italic:n.fontStyle="normal"),"uppercase"==e&&(l.S.content.typo.categories.uppercase?n.textTransform=l.S.content.typo.categories.uppercase:n.textTransform="none")}),l.W.content_parts.categories.css(n)}).trigger("change"),l.C.C.shares_font_size.on("change",function(){l.S.content.typo.shares.size=parseInt(l.C.C.shares_font_size.val()),l.W.content_parts.shares.find("a").css({fontSize:l.S.content.typo.shares.size+"px",lineHeight:l.S.content.typo.shares.size+"px"})}).trigger("change"),l.C.C.shares_color.on("change",function(){l.S.content.typo.shares.color=l.C.C.shares_color.minicolors("value"),l.W.content_parts.shares.find("a").css("color",l.S.content.typo.shares.color)}).trigger("change"),l.W.content_parts.shares.on("mouseenter","a",function(){e(this).css("background",e(this).data("color"))}).on("mouseleave","a",function(){e(this).css("background","transparent")}),l.C.C.shares_radius.on("change",function(){l.S.content.typo.shares.radius=parseInt(l.C.C.shares_radius.val()),l.W.content_parts.shares.find("a").css("border-radius",l.S.content.typo.shares.radius+"%")}).trigger("change"),l.C.C.shares_enable.on("change.hi",function(){var t=e(this),a=t.val();l.S.content.shares_enable[a]=t.is(":checked"),l.W.content_parts.shares.find("a.hi-ff-"+a).toggle(l.S.content.shares_enable[a])}).trigger("change"),l.W.content_parts.shares.find("a").on("click",!1)},_radius:function(){l.C.I.radius.on("change.hi",function(){var t=e(this);l.S.image.radius[t.data("position")]=t.val(),l._set_image_radius_hover(),l.W.image.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.overlay.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.content_div.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units))}).trigger("change"),l.C.I.radius_units.on("change.hi",function(){var t=e(this);l.S.image.radius_units=t.val(),l._set_image_radius_hover(),l.W.image.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.overlay.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.content_div.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units))}).filter(":checked").trigger("change"),l.C.B.radius.on("change.hi",function(){var t=e(this);l.S.buttons.radius[t.data("position")]=t.val(),l._set_buttons_radius_hover(),l.W.buttons_a.css("borderRadius",l.S.buttons.radius.start+"%")}).trigger("change")},_pc_to_pc:function(e){return"pc"==e?"%":e},_set_buttons_radius_hover:function(){l.W.buttons_a.hover(function(){e(this).css("borderRadius",l.S.buttons.radius.stop+"%")},function(){e(this).css("borderRadius",l.S.buttons.radius.start+"%")})},_set_image_radius_hover:function(){l.W.preview.hover(function(){l.W.image.css("borderRadius",l.S.image.radius.stop+l._pc_to_pc(l.S.image.radius_units)),l.W.overlay.css("borderRadius",l.S.image.radius.stop+l._pc_to_pc(l.S.image.radius_units)),l.W.content_div.css("borderRadius",l.S.image.radius.stop+l._pc_to_pc(l.S.image.radius_units))},function(){l.W.image.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.overlay.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.content_div.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units))})},_fade:function(){e.each({O:"overlay",B:"buttons",C:"content"},function(t,a){l.C[t].fade_enable.on("change",function(){l.S[a].fade=l._is_on(e(this)),l.W[a].toggleClass("hi-disable-fade",!l.S[a].fade),l._hover_action(0,a),l._css3(a)}).filter(":checked").trigger("change")})},_transform:function(){e.each({I:"image",O:"overlay",B:"buttons",C:"content"},function(t,a){l.C[t].rotate_enable.on("change",function(){l.S[a].rotate=l._is_on(e(this)),l._hover_action(0,a),l._css3(a)}).filter(":checked").trigger("change"),e.each(["x","y","z"],function(i,n){var o="rotate_grad_"+n;l.C[t][o].on("change",function(){var t=e(this);l.S[a][o][t.data("position")]=t.val(),l._hover_action(0,a),l._css3(a)}).trigger("change")}),l.C[t].perspective.on("change",function(){l.S[a].perspective=e(this).val(),l._hover_action(0,a),l._css3(a)}).trigger("change"),l.C[t].origin.on("change",function(){l.S[a].origin=e(this).val(),l.W[a].css("transform-origin",l.S[a].origin),l.W[a].css("-webkit-transform-origin",l.S[a].origin),l.W[a].css("-ms-transform-origin",l.S[a].origin),l._hover_action(0,a),l._css3(a)}).trigger("change")}),e.each({I:"image",O:"overlay",B:"buttons",C:"content"},function(t,a){l.C[t].scale_enable.on("change",function(){l.S[a].scale=l._is_on(e(this)),l._hover_action(0,a),l._css3(a)}).filter(":checked").trigger("change"),l.C[t].scale_percents.on("change",function(){var t=e(this);l.S[a].scale_percents[t.data("position")]=t.val(),l._hover_action(0,a),l._css3(a)}).trigger("change")}),e.each({I:"image",O:"overlay",B:"buttons",C:"content"},function(t,a){l.C[t].slide_enable.on("change",function(){l.S[a].slide=l._is_on(e(this)),l._hover_action(0,a),l._css3(a)}).filter(":checked").trigger("change"),l.C[t].slide_direction.on("change",function(){l.S[a].slide_direction=e(this).val(),l._hover_action(0,a),l._css3(a)}).trigger("change")}),e.each({I:"image"},function(t,a){l.C[t].push_enable.on("change",function(){l.S[a].push=l._is_on(e(this)),l._hover_action(0,a),l._css3(a)}).filter(":checked").trigger("change")}),l._edit_mode(1),l._edit_mode(0)},_transform_get_slide_start:function(e){if(l.S[e].slide){var t=l._slide_pos(l.S[e].slide_direction);return"translate3d( "+t[1]+", "+t[0]+", 0)"}return""},_transform_get_slide_stop:function(t){if("image"==t){if(l.S.image.push&&l.S.content.enable&&l.S.content.slide){var a="";if("partial"==l.S.content.partial){var i=l.S.content.partial_size+"px";switch(l.S.content.partial_position){case"top":a="0, "+i+", 0";break;case"bottom":a="0, -"+i+", 0";break;case"left":a=i+", 0, 0";break;case"right":a="-"+i+", 0, 0"}return"translate3d( "+a+")"}var i="100%",n=l._slide_pos(l.S.content.slide_direction);return e.each(n,function(e,t){"-"==t.charAt(0)?n[e]=t.substr(1,t.length):n[e]="-"+t}),"translate3d( "+n[1]+", "+n[0]+", 0)"}}else if(l.S[t].slide)return"translate3d( 0% , 0%, 0)";return""},_transform_get_scale:function(e,t){if(l.S[e].scale){var a=l.S[e].scale_percents[t]/100;return"scale("+a+","+a+")"}return""},_transform_get_rotate:function(e,t){if(l.S[e].rotate){var a=l.S[e].rotate_grad_x[t],i=l.S[e].rotate_grad_y[t],n=l.S[e].rotate_grad_z[t];return"rotateX( "+a+"deg ) rotateY( "+i+"deg ) rotateZ( "+n+"deg )"}return""},_transform_get_perspective:function(e){return l.S[e].rotate&&l.S[e].perspective>0?"perspective("+l.S[e].perspective+"px)":""},_partial:function(){l.C.C.partial_size.on("change",function(){l.S.content.partial_size=e(this).val(),"partial"==l.S.content.partial?l._set_partial_position_stop():l._remove_partial()}).trigger("change"),l.C.C.type.on("change",function(){l.S.content.partial=e(this).val(),"partial"==l.S.content.partial?l._set_partial_position_stop():l._remove_partial()}).filter(":checked").trigger("change"),l.C.C.partial_position.on("change",function(){l.S.content.partial_position=e(this).val(),l._set_partial_position_stop()}).filter(":checked").trigger("change")},_set_partial_position_stop:function(){if("partial"==l.S.content.partial){var e=l.C.C.partial_size.val(),t=l.C.C.partial_position.filter(":checked").val(),a={};switch(t){case"top":a={top:0,left:0,right:0,bottom:"auto",height:e+"px",width:"100%"};break;case"bottom":a={top:"auto",left:0,right:0,bottom:0,height:e+"px",width:"100%"};break;case"left":a={top:0,left:0,right:"auto",bottom:0,width:e+"px",height:"100%"};break;case"right":a={top:0,left:"auto",right:0,bottom:0,width:e+"px",height:"100%"}}l.W.content.css(a),l._hover_action(l.S.content.always,"image")}},_remove_partial:function(){l.W.content.css({height:"100%",width:"100%"})},_get_as:function(e,t){var a=0;return e&&(a=l.S.transition_speed),a},_hover:function(){l.W.preview.hover(function(){l.S.edit_mode||(l._hover_action(1,"image"),l._hover_action(1,"overlay"),l._hover_action(1,"buttons"),l._hover_action(1,"content"))},function(){l.S.edit_mode||(l._hover_action(0,"image"),l._hover_action(0,"overlay"),l._hover_action(0,"buttons"),l._hover_action(0,"content"))})},_hover_action:function(e,t){if(0==l.S[t].enable)return!1;l.S.edit_mode&&(e=1),!l.S.edit_mode&&"content"==t&&l.S.content.always&&(e=1);var a;if(e)l.W[t].css({display:"block",opacity:l.S[t].opacity}),"image"==t&&(l.W.image.css("borderRadius",l.S.image.radius.stop+l._pc_to_pc(l.S.image.radius_units)),l.W.overlay.css("borderRadius",l.S.image.radius.stop+l._pc_to_pc(l.S.image.radius_units)),l.W.content_div.css("borderRadius",l.S.image.radius.stop+l._pc_to_pc(l.S.image.radius_units))),a=l._transform_get_perspective(t)+" "+l._transform_get_rotate(t,"stop")+" "+l._transform_get_scale(t,"stop")+" "+l._transform_get_slide_stop(t),l._set_tranform(l.W[t],a.trim());else if(!l.S.edit_mode){var i=0;l.S[t].slide&&!l.S[t].fade&&(i="buttons"==t?1:l.S[t].opacity),"image"==t&&(i=1,l.W.image.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.overlay.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units)),l.W.content_div.css("borderRadius",l.S.image.radius.start+l._pc_to_pc(l.S.image.radius_units))),l.W[t].css({opacity:i}),a=l._transform_get_perspective(t)+" "+l._transform_get_rotate(t,"start")+" "+l._transform_get_scale(t,"start")+" "+l._transform_get_slide_start(t),l._set_tranform(l.W[t],a.trim())}},_edit_mode:function(e){e?(l._hover_action(1,"image"),l._hover_action(1,"overlay"),l._hover_action(1,"buttons"),l._hover_action(1,"content")):(l._hover_action(0,"image"),l._hover_action(0,"overlay"),l._hover_action(0,"buttons"),l._hover_action(0,"content"))},_css_transition:function(e){var t=[];return"image"==e&&((l.S.image.slide||l.S.image.rotate||l.S.image.scale||l.S.image.push)&&t.push("transform"),t.push("border")),"overlay"==e&&(l.S.overlay.fade&&t.push("opacity"),(l.S.overlay.slide||l.S.overlay.rotate||l.S.overlay.scale)&&t.push("transform"),t.push("border")),"content"==e&&(l.S.content.fade&&t.push("opacity"),(l.S.content.slide||l.S.content.rotate||l.S.content.scale)&&t.push("transform"),t.push("border")),"buttons"==e&&("border"!=l.S.buttons.type&&"background"!=l.S.buttons.type||t.push("border"),l.S.buttons.fade&&t.push("opacity"),(l.S.buttons.slide||l.S.buttons.rotate||l.S.buttons.scale)&&t.push("transform")),t},_prfxz:function(t){var a=[];return e.each(["","-webkit-","-moz-","-o-"],function(e,i){a[e]=i+t}),a},_set_tranform:function(e,t){e.css({"-webkit-transform":t,"-ms-transform":t,transform:t})},_set_transition:function(t,a){e.each(["","-webkit-","-moz-","-o-"],function(e,i){var n=a.replace(/(transform)(.*)/,i+"$1$2");t.css(i+"transition",n)})},_css3:function(t){var a,i;e.each(["image","overlay","buttons","content"],function(t,n){a=[],i=[];var o=l._css_transition(n);e.each(o,function(e,t){"transform"==t&&a.push(t+" "+l._get_as(1,n)+"ms ease 0s"),"opacity"==t&&a.push(t+" "+l._get_as(l.S[n].fade,n)+"ms ease 0s"),"image"!=n&&"overlay"!=n&&"content"!=n||a.push("border-radius "+l._get_as(1,"image")+"ms ease 0s"),"buttons"==n&&("border"==t&&i.push("border-radius "+l._get_as(1,"buttons")+"ms ease 0s"),i.push("opacity "+l._get_as(1,"buttons")+"ms ease 0s"),l._set_transition(l.W.buttons_a,i.join(",")))}),l._set_transition(l.W[n],a.join(","));
})},_is_on:function(e){return"on"==e.val()},_slide_pos:function(e){var t=0,a=0;return e>=0&&e<=45&&(a=Math.ceil(2.222*e),t=-100),e>=46&&e<=135&&(a=100,t=-(100-Math.ceil(2.222*(e-45)))),e>=136&&e<=225&&(a=100-Math.ceil(2.222*(e-135)),t=100),e>=226&&e<=315&&(a=-100,t=100-Math.ceil(2.222*(e-225))),e>=316&&e<=360&&(a=-100+Math.ceil(2.222*(e-315)),t=-100),[t+"%",a+"%"]},_set_wrapper_prop:function(e){l.C.wrapper_overflow.prop("checked",!1).parent().removeClass("active"),l.C.wrapper_overflow.filter('[value="'+e.overflow+'"]').prop("checked",!0).trigger("change").parent().addClass("active");var t=l._rgb2hex(e.background);l.C.wrapper_background.minicolors("value",t.hex),l.C.wrapper_background.minicolors("opacity",t.opacity)},_set_enable:function(e,t){e.prop("checked",!1).parent().removeClass("active"),t?e.filter('[value="on"]').prop("checked",!0).trigger("change").parent().addClass("active"):e.filter('[value="off"]').prop("checked",!0).trigger("change").parent().addClass("active")},_set_transform_prop:function(t,a){e.each(["start","stop"],function(e,i){l.C[a].rotate_grad_x.eq(e).val(t.rotate_grad_x[i]).trigger("change"),l.C[a].rotate_grad_y.eq(e).val(t.rotate_grad_y[i]).trigger("change"),l.C[a].rotate_grad_z.eq(e).val(t.rotate_grad_z[i]).trigger("change"),l.C[a].scale_percents.eq(e).val(t.scale_percents[i]).trigger("change")}),l.C[a].perspective.val(t.perspective).trigger("change"),l.C[a].origin.siblings(".active").removeClass("active btn-primary").addClass("btn-default"),l.C[a].origin.parent().find(".btn").filter('[value="'+t.origin+'"]').addClass("active btn-primary").removeClass("btn-default"),l.C[a].origin.val(t.origin).trigger("change")},_set_image_prop:function(t){l._set_enable(l.C.I.rotate_enable,t.rotate),l._set_enable(l.C.I.push_enable,t.push),l._set_enable(l.C.I.scale_enable,t.scale),l._set_transform_prop(t,"I"),e.each(["start","stop"],function(e,a){var i=0;"undefined"!=typeof t.radius&&(i=t.radius[a]),l.C.I.radius.eq(e).val(i).trigger("change")}),l.C.I.radius_units.prop("checked",!1).parent().removeClass("active"),l.C.I.radius_units.filter('[value="'+t.radius_units+'"]').prop("checked",!0).trigger("change").parent().addClass("active")},_set_overlay_prop:function(e){l._set_enable(l.C.O.enable,e.enable),l._set_enable(l.C.O.rotate_enable,e.rotate),l._set_enable(l.C.O.scale_enable,e.scale),l._set_enable(l.C.O.fade_enable,e.fade),l._set_enable(l.C.O.slide_enable,e.slide),l._set_transform_prop(e,"O"),l.C.O.slide_direction.val(e.slide_direction).trigger("change");var t=l._rgb2hex(e.background);l.C.O.background.minicolors("value",t.hex),l.C.O.background.minicolors("opacity",t.opacity)},_set_buttons_prop:function(t){l._set_enable(l.C.B.enable,t.enable),l._set_enable(l.C.B.pphoto,t.pphoto),l._set_enable(l.C.B.rotate_enable,t.rotate),l._set_enable(l.C.B.scale_enable,t.scale),l._set_enable(l.C.B.fade_enable,t.fade),l._set_enable(l.C.B.slide_enable,t.slide),l._set_transform_prop(t,"B"),l.C.B.slide_direction.val(t.slide_direction).trigger("change"),l.C.B.set.each(function(a,i){var n=e(i);t.set[n.val()]?n.prop("checked",!0).trigger("change").parent().addClass("active"):n.prop("checked",!1).trigger("change").parent().removeClass("active")}),l._set_enable(l.C.B.link_single,t.link_single),l.C.B.type.prop("checked",!1).parent().removeClass("active"),l.C.B.type.filter('[value="'+t.type+'"]').prop("checked",!0).trigger("change").parent().addClass("active"),l.C.B.color.minicolors("value",t.color),l.C.B.background.minicolors("value",t.background),l.C.B.background.minicolors("opacity",t.opacity),l.C.B.size.val(t.size).trigger("change"),e.each(["start","stop"],function(e,a){l.C.B.radius.eq(e).val(t.radius[a]).trigger("change")})},_set_content_prop:function(t){l._set_enable(l.C.C.enable,t.enable),l._set_enable(l.C.C.always,t.always),l._set_enable(l.C.C.rotate_enable,t.rotate),l._set_enable(l.C.C.scale_enable,t.scale),l._set_enable(l.C.C.fade_enable,t.fade),l._set_enable(l.C.C.slide_enable,t.slide),l._set_transform_prop(t,"C"),l.C.C.slide_direction.val(t.slide_direction).trigger("change"),l.C.C.enable_parts.each(function(a,i){var n=e(i);t.enable_parts[n.val()]?n.prop("checked",!0).trigger("change").parent().addClass("active"):n.prop("checked",!1).trigger("change").parent().removeClass("active")});var a=l._rgb2hex(t.background);l.C.C.background.minicolors("value",a.hex),l.C.C.background.minicolors("opacity",a.opacity),l.C.C.type.prop("checked",!1).parent().removeClass("active"),l.C.C.type.filter('[value="'+t.partial+'"]').prop("checked",!0).trigger("change").parent().addClass("active"),l.C.C.title_type.prop("checked",!1).parent().removeClass("active"),l.C.C.title_type.filter('[value="'+t.title_type+'"]').prop("checked",!0).trigger("change").parent().addClass("active"),l.C.C.partial_size.val(t.partial_size).trigger("change"),l.C.C.partial_position.prop("checked",!1).parent().removeClass("active"),l.C.C.partial_position.filter('[value="'+t.partial_position+'"]').prop("checked",!0).trigger("change").parent().addClass("active"),l.C.C.margin.val(t.margin).trigger("change"),l.C.C.align.prop("checked",!1).parent().removeClass("active"),l.C.C.align.filter('[value="'+t.align+'"]').prop("checked",!0).trigger("change").parent().addClass("active"),l.C.C.shares_enable.each(function(a,i){var n=e(i);t.shares_enable[n.val()]?n.prop("checked",!0).trigger("change").parent().addClass("active"):n.prop("checked",!1).trigger("change").parent().removeClass("active")}),l.C.C.shares_radius.val(t.typo.shares.radius).trigger("change"),l.C.C.title_font_size.val(t.typo.title.size).trigger("change"),l.C.C.title_color.minicolors("value",t.typo.title.color),l.C.C.title_font_style.each(function(a,i){var n=e(i),o=n.val();o==t.typo.title[o]?n.prop("checked",!0).trigger("change").parent().addClass("active"):n.prop("checked",!1).trigger("change").parent().removeClass("active")}),l.C.C.excerpt_length.val(t.typo.excerpt.length).trigger("change"),l.C.C.excerpt_font_size.val(t.typo.excerpt.size).trigger("change"),l.C.C.excerpt_color.minicolors("value",t.typo.excerpt.color),l.C.C.excerpt_font_style.each(function(a,i){var n=e(i),o=n.val();o==t.typo.excerpt[o]?n.prop("checked",!0).trigger("change").parent().addClass("active"):n.prop("checked",!1).trigger("change").parent().removeClass("active")}),l.C.C.categories_font_size.val(t.typo.categories.size).trigger("change"),l.C.C.categories_color.minicolors("value",t.typo.categories.color),l.C.C.categories_font_style.each(function(a,i){var n=e(i),o=n.val();o==t.typo.categories[o]?n.prop("checked",!0).trigger("change").parent().addClass("active"):n.prop("checked",!1).trigger("change").parent().removeClass("active")}),l.C.C.shares_font_size.val(t.typo.shares.size).trigger("change"),l.C.C.shares_color.minicolors("value",t.typo.shares.color),l.C.C.shares_font_style.each(function(a,i){var n=e(i),o=n.val();o==t.typo.shares[o]?n.prop("checked",!0).trigger("change").parent().addClass("active"):n.prop("checked",!1).trigger("change").parent().removeClass("active")})},_set_other:function(t){e("#hi-tpl-id").val(t.tplid),""==t.tplid?e("#hi-tpl-id-title").empty().text(e("#hi-tpl-id-title").data("text")):e("#hi-tpl-id-title").empty().text(" ( ID: "+t.tplid+")"),l.S.tplid=t.tplid,e("#hi-tpl-name").val(t.tplname),e("#hi-tpl-name-div").editable("setValue",t.tplname),l.C.transition_speed.val(t.transition_speed).trigger("change"),e.each(t.assigned,function(e,t){var a=l.C.tpl_assign.filter(".hi-"+e);a.length&&("INPUT"==a[0].nodeName&&a.prop("checked",!0),"TEXTAREA"==a[0].nodeName&&a.empty().text(t))}),l.C.tpl_assign.trigger("change"),l.C.mode_buttons.removeAttr("checked").parent().removeClass("active"),t.edit_mode?l.C.mode_buttons.filter("#hi-mode-edit").attr("checked","checked").trigger("change").parent().addClass("active"):l.C.mode_buttons.filter("#hi-mode-view").attr("checked","checked").trigger("change").parent().addClass("active"),e.each(["overlay","buttons","content"],function(t,a){store.set("index-hi-options-"+a+"-tabs",0),e("#hi-options-"+a+"-tabs a:first").tab("show")})},_rgb2hex:function(t){var a=t.replace("rgba","").replace("(","").replace(")","").split(","),i=[parseInt(a[0]).toString(16),parseInt(a[1]).toString(16),parseInt(a[2]).toString(16)];return e.each(i,function(e,t){1===t.length&&(i[e]="0"+t)}),{hex:"#"+i.join(""),opacity:a[3]}},_check_response:function(e){return"no_rights"==e?(alert("You are using Hover Effects Builder in DEMO mode. Save Changes, Delete, Clone options are not available in DEMO."),!1):"error"!=e},_save:function(){l.C.save_btn.on("click",function(a){a.preventDefault();var i=e(this),n=i.find("i"),s=e("#hi-tpl-id").val(),p=e("#hi-tpl-name").val(),h=JSON.stringify(l.S),d={type:"save",action:"hi_ajax_post_action",security:e("#security").val(),data:h,id:s,name:p};i.attr("disabled","disabled"),n.removeClass("hide"),e.post(ajaxurl,d,function(a){if(0==l._check_response(a))return i.removeAttr("disabled"),n.addClass("hide"),!1;var h=JSON.parse(a);if(h.id){e("#hi-tpl-id").val(h.id),e("#hi-tpl-id-title").empty().text(" ( ID: "+h.id+")");var d=e("#hi-tpls"),_=e("#hi-"+h.id);l.S.tplid=h.id,_.length?_.replaceWith(e(h.tpl).html()):d.append(h.tpl);var g=e("#hi-"+h.id);if(g.length){var u=g.find(".hi-content-excerpt");u.length&&u.data("hc",u.innerHeight());var f=g.find(".hi-view-button");f.length&&c(f),o(g)}e(".hi-no-saved-tpls").hide();var v=e("select.hi-tpl-assign").find('option[value="'+h.id+'"]');v.length?v.each(function(t,a){var i=e(a);i.text(p+" ( id: "+h.id+" )")}):e("select.hi-tpl-assign").append('<option value="'+h.id+'">'+p+" ( id: "+h.id+" )</option>")}t(e("#hi-tpls")),s&&r(s,p),i.removeAttr("disabled"),n.addClass("hide")})})},_ls:function(){var t=e("#hi-tpl-id"),a=e("#hi-tpl-name");setInterval(function(){store.set("HIS",{id:t.val(),name:a.val(),data:l.S})},2e3)},_loadData:function(e){l._set_wrapper_prop(e.wrapper),l._set_image_prop(e.image),l._set_overlay_prop(e.overlay),l._set_buttons_prop(e.buttons),l._set_content_prop(e.content),l._set_other(e)},_hi:function(){this._mode(),this._enable(),this._enable_parts(),this._overflow(),this._buttons_type_init(),this._background(),this._color(),this._size(),this._margin(),this._align(),this._typo(),this._radius(),this._fade(),this._transform(),this._partial(),this._hover(),this._css3(),this._save(),this._psize(),this._ls()},_after_load:function(){setTimeout(function(){l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length+1),l._clamp(l.W.content_parts.excerpt,l.S.content.typo.excerpt.length)},1e3),e("#hi-templates-tab").hasClass("active")&&i()}};l._hi(),l._after_load();var p=e("#hi-tpls").sortable({containerSelector:"div#hi-tpls",itemSelector:".hi-tpl-item",delay:100,placeholder:'<div class="hi-tpl-item ph"><div class="hi-tpl-frame"></div></div>',onDrop:function(e,a,i){t(p),i(e,a)}});e("#hi-templates-tab").on("click",".hi-tpl-edit",function(){e('#hi-tabs-main a[href="#hi-editor-tab"]').tab("show");var t=e.parseJSON(e(e(this).data("tpl")).text());l._loadData(t)}),e(".hi-add-new").on("click",function(){e('#hi-tabs-main a[href="#hi-editor-tab"]').tab("show"),a()}),e(".hi-nav-tabs").each(function(){var t=this.id,a=e(this),i=a.find(" > li"),n=a.find(" > li > a"),o=store.get("index-"+t);o?"":o=0,n.eq(o).tab("show"),i.removeClass("active").eq(o).addClass("active"),n.on("click."+t,function(a){var i=e(this);i.tab("show"),store.set("index-"+t,i.parent().index()),a.preventDefault()})}),e('a[href="#hi-templates-tab"]').on("shown.bs.tab",function(e){i()}),i(),e(".hi-trigger").each(function(t,a){var i=e(a),o=n(i,!1);e.each(o,function(t,a){var o=a.split("="),r=e("."+o[0]),s="change."+o.join("").hiReplaceAll("-","")+Math.random();r.off(s).on(s,function(){n(i,!0)})})}),e(".hi-touchspin").each(function(){var t=e(this),a=e.extend({prefix:"",postfix:"",step:1},t.data());t.TouchSpin(a),t.on("change.s",function(t,i){var n=e(this);""==n.val()&&(a.min<0?n.val(0):n.val(a.min),n.trigger("change"))})}),e(".hi-control-direction").each(function(){var t=e(this),a=t.find("input.hi-touchspin"),i=t.find("i.hi-dir-icon"),n=a.val();i.css("transform","rotate("+n+"deg)"),a.on("change",function(){i.css("transform","rotate("+e(this).val()+"deg)")})}),e(".hi-control-origin span.btn").on("click",function(t){t.preventDefault();var a=e(this);a.addClass("active btn-primary").siblings(".active").removeClass("active").removeClass("btn-primary").addClass("btn-default"),a.parent().find("input").val(a.attr("value")).trigger("change")}),e(".btn-group label").each(function(){var t=e(this);t.find("input").is(":checked")&&t.addClass("active")}),e(document).on("mouseenter",".hi-content-share a",function(){e(this).css("background",e(this).data("color"))}).on("mouseleave",".hi-content-share a",function(){e(this).css("background","transparent")}),e(".hi-cp").each(function(t,a){var i,n=e(a),o=n.data("opacity");i="undefined"!=typeof o,n.minicolors({change:function(t,a){e(e(this).data("oi")).val(a)},theme:"bootstrap",opacity:i})});var h=e("#hi-tpl-name"),d=e("#hi-tpl-name-div");e.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="hi-fb-ok"></i></button><button type="button" class="btn btn-default editable-cancel"><i class="hi-fb-close"></i></button>',d.editable({mode:"inline",inputclass:"form-control",emptyclass:"",success:function(e,t){""==t?h.val(d.data("emptytext")):h.val(t)}}),o(e("#hi-tpls")),e("#hi-templates-tab").on("click",".hi-tpl-remove",function(){var i=e(this),n=confirm(i.data("confirm"));if(1==n){var o=i.data("tpl"),r=o.replace("#",""),s=e("#security").val();i.addClass("hi-fb-refresh hi-spinner");var c={type:"remove-tpl",action:"hi_ajax_post_action",security:s,name:r};e.post(ajaxurl,c,function(n){return 0==l._check_response(n)?(i.removeClass("hi-fb-refresh hi-spinner"),!1):(1==n&&(e("#hi-"+o.replace("#","")).fadeOut("300",function(){e(this).parent().remove()}),e('option[value="'+r+'"]').remove(),e("#hi-tpl-id").val()==r&&a(),t(e("#hi-tpls"))),void i.removeClass("hi-fb-refresh hi-spinner"))})}}),e("#hi-templates-tab").on("click",".hi-tpl-copy",function(a){a.preventDefault();var i=e(this),n=i.parents(".hi-tpl-item"),r=(i.find("i"),""),s=i.data("name"),p=e(i.data("tpl")).text(),h={type:"save",action:"hi_ajax_post_action",security:e("#security").val(),data:p,id:r,name:s};i.removeClass("hi-fb-copy").addClass("hi-fb-refresh hi-spinner"),e.post(ajaxurl,h,function(a){if(0==l._check_response(a))return i.removeClass("hi-fb-refresh hi-spinner").addClass("hi-fb-copy"),!1;var r=JSON.parse(a);if(r.id){e("#hi-tpl-id").val(r.id),e("#hi-tpl-id-title").empty().text(" ( ID: "+r.id+")");var p=(e("#hi-tpls"),e("#hi-"+r.id));l.S.tplid=r.id,p.length&&p.parent().remove();var h=e(r.tpl);h.addClass("new-"+r.id).insertAfter(n).fadeOut(0,function(){e(this).fadeIn(400)});var d=e("#hi-"+r.id);if(d.length){var _=d.find(".hi-content-excerpt");_.length&&_.data("hc",_.innerHeight());var g=d.find(".hi-view-button");g.length&&c(g),o(d)}e(".hi-no-saved-tpls").hide(),e("select.hi-tpl-assign").append('<option value="'+r.id+'">'+s+" ( id: "+r.id+" )</option>")}t(e("#hi-tpls")),i.removeClass("hi-fb-refresh hi-spinner").addClass("hi-fb-copy")})}),e(".hi-assign-save").on("click",function(t){t.preventDefault();var a=e(this),i=a.find("i");a.attr("disabled","disabled"),i.removeClass("hide");var n={fi:{},api:{},ex:{}},o={fi:e(".hi-tpl-assign-fi"),api:e(".hi-tpl-assign-api"),ex:e(".hi-tpl-excludes")};o.fi.each(function(t,a){var i=e(this),o=i.data("key"),r=i.val();""!=r&&(n.fi[o]=r)}),o.api.each(function(t,a){var i=e(this),o=i.data("key"),r=i.val();""!=r&&(n.api[o]=r)}),o.ex.each(function(t,a){var i=e(this),o="hi-excludes",r=i.val(),s=r.split(",");n.ex[o]=s});var r={type:"save-assigns",action:"hi_ajax_post_action",security:e("#security").val(),data:JSON.stringify(n)};e.post(ajaxurl,r,function(e){return 0==l._check_response(e)?(a.removeAttr("disabled"),i.addClass("hide"),!1):(a.removeAttr("disabled"),i.addClass("hide"),void s())})}),e(document).on("click",".hi-assigned-link",function(){e('#hi-tabs-main a[href="#hi-options-tab"]').tab("show")});var _=store.get("HIS");_&&(_.data.tplid=_.id,_.data.tplname=_.name,l._loadData(_.data)),e(".hi-view-button").each(function(){c(e(this))})});
